{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/controllers/activities-new.js","src/js/controllers/activities.js","src/js/controllers/activity-details.js","src/js/init.js","src/js/router.js","src/js/sorted-router.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar views = require('views');\nvar router = require('../router');\n\nrouter.route('activities/new', function () {\n\t\n\tshowMain();\n\t \n\t$('.newactivity-form').on('submit', function(e){\n\t\te.preventDefault();\n\t\tvar data = $('#newAct').val();\n\t\tconsole.log(data);\n\t\tvar csrftoken = getCookie('csrftoken'); \n\t\t$.ajax({\n\t\t\tbeforeSend: function (request){\n\t\t\tconsole.log(csrftoken)\n            request.setRequestHeader('X-CSRFToken', csrftoken);\n           },\n\t\t\tmethod: 'POST', \n\t\t\turl: '/api/activities/',\n\t\t\tdata: {'title': data}\n  \t\t}).done(function (data){\n\t\t\t  alert('saved');\n\t\t\tconsole.log(data);\n\t\t});\n\t});\n});\n\nfunction showMain() {\n\tvar mainTemplate = views['activities-new'];\n\t$('.main-content').html(mainTemplate);\n}\n\n\nfunction getCookie(name) {\n   var cookieValue = null;\n   if (document.cookie && document.cookie != '') {\n       var cookies = document.cookie.split(';');\n       for (var i = 0; i < cookies.length; i++) {\n           var cookie = $.trim(cookies[i]);\n           // Does this cookie string begin with the name we want?\n           if (cookie.substring(0, name.length + 1) == (name + '=')) {\n               cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n               break;\n           }\n       }\n   }\n   console.log(cookieValue);\n   return cookieValue;\n}\n   \n\n","'use strict';\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar views = require('views');\nvar router = require('../router');\n\nrouter.route('', 'activities', function () {\n\tshowLogin();\n\tshowActivities();\n});\n\nfunction showMain(data) {\n\tvar activitiesTemplate = views['activities'];\n    var templateFn = _.template(activitiesTemplate, { variable: 'm' });\n    var activitiesHTML = templateFn({ activities: data });\n\t$('.main-content').html(activitiesHTML);\n}\n\nfunction showActivities() {\n\t$.ajax({\n\t\t\tmethod: 'GET', \n\t\t\turl: '/api/activities/'\n  \t\t})\n\t\t  .done(function (data){\n\t\t  console.log(data);\n\t\t  showMain(data);\n\t\t  });\n}\n\nfunction showLogin() {\n\t$.ajax({\n\t\t\tmethod: 'GET', \n\t\t\turl: '/api/users/'\n  \t\t})\n\t\t  \t.done(function (data){\n\t\t\tconsole.log(data);\n    \t\tvar template = _.template(views['logged-in'], { variable: 'm' });\n\t\t\tconsole.log()\n    \t\tvar loginHTML = template(data);\n\t\t\tconsole.log(loginHTML);\n    \t\t$('.nav-content').html(loginHTML);\n\t\t});\n\t\n}","'use strict';\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar views = require('views');\nvar router = require('../router');\n\n\nrouter.route('activities/:id', function (Id) {\n$.ajax({\n\t\t\tmethod: 'GET', \n\t\t\turl: '/api/activities/'+Id\n  \t\t})\n\t\t.then(renderDetails)\n\t\t.then(addStat);\n\t\t\n   \t\t\n});\n\n\t\n\t\t  \n\t\t  \n\n\n function renderDetails(data) {\n\tconsole.log(data);\n    var activityTemplate = views['activity-details'];\n    var templateFn = _.template(activityTemplate, { variable: 'm' });\n    var activityHTML = templateFn(data);\n    $('.main-content').html(activityHTML);\n\treturn data;\n }\n \n function addStat(data) {\n\t var Id = data.id;\n\t $('.new-stat').on('submit', function(e){\n\t\t\te.preventDefault();\n\t\t\tvar date = $('.datepicker').val();\n\t\t\tvar stat = $('.stat').val();\n\t\t\tconsole.log(date);\n\t\t\tconsole.log(stat);\n\t\t\tvar csrftoken = getCookie('csrftoken'); \n\t\t\tconsole.log(Id);\n\t\t\t$.ajax({\n\t\t\t\tbeforeSend: function (request){\n\t\t\t\tconsole.log(csrftoken)\n\t            request.setRequestHeader('X-CSRFToken', csrftoken);\n\t           \t},\n\t\t\t\tmethod: 'POST', \n\t\t\t\turl: '/api/activities/'+Id+'/stat/',\n\t\t\t\tdata: {'stat': stat, 'timestamp': date}\n  \t\t\t}).done(function (data){\n\t\t\t  alert('saved');\n\t\t\tconsole.log(data);\n\t\t});\n\t\t});\n }\n \n function getCookie(name) {\n   var cookieValue = null;\n   if (document.cookie && document.cookie != '') {\n       var cookies = document.cookie.split(';');\n       for (var i = 0; i < cookies.length; i++) {\n           var cookie = $.trim(cookies[i]);\n           // Does this cookie string begin with the name we want?\n           if (cookie.substring(0, name.length + 1) == (name + '=')) {\n               cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n               break;\n           }\n       }\n   }\n   console.log(cookieValue);\n   return cookieValue;\n}","// TODO: put initialization logic here\n'use strict';\n\n\nvar router = require('./router');\n\n// Require all of our controllers\n({\"controllers\":({\"activities-new\":require(\"./controllers/activities-new.js\"),\"activities\":require(\"./controllers/activities.js\"),\"activity-details\":require(\"./controllers/activity-details.js\")})});\n\n// Start the router\nrouter.init();","'use strict';\n\nvar SortedRouter = require('./sorted-router');\n\nmodule.exports = new SortedRouter();","'use strict';\n \nvar Backbone = require('backbone');\nvar _ = require('underscore');\n \nvar SortedRouter = Backbone.Router.extend({\n  sortedRoutes: {},\n  \n  // Overwrite the Backbone.Router.route method so we can \n  // register routes in the correct order.\n  route: function () {\n    var len = arguments.length - 1,\n        callback = arguments[arguments.length - 1];\n \n    for (var i = 0; i < len; ++i) {\n      this.sortedRoutes[arguments[i]] = callback;\n    }\n  },\n  \n  init: function () {\n    // A magic number to force a route to be lowest specificity\n    // Number.MIN_VALUE didn't work...\n    var lowestRoute = -1000000;\n    var me = this;\n \n    // Register all routes, sorted by specificity\n    _.chain(_.pairs(this.sortedRoutes))\n      .sortBy(function (route) {\n        var url = route[0];\n \n        if (url.indexOf('*') >= 0) {\n          return lowestRoute;\n        } else {\n          return -url.split(':').length;\n        }\n      })\n      .each(function (route) {\n        Backbone.Router.prototype.route.apply(me, route);\n      });\n \n    // Start the backbone routing subsystem\n    Backbone.history.start();\n  }\n});\n \nmodule.exports = SortedRouter;"]}